---
interface Props {
  trackId: string;
  audioPath: string;
}

const { trackId, audioPath } = Astro.props;
---
<div class="audio-player bg-white rounded-lg shadow p-4 border border-gray-100" data-track-id={trackId}>
  <audio id={`audio-${trackId}`} src={audioPath} preload="metadata"></audio>

  <div class="flex items-center gap-4">
    <!-- Play/Pause Button -->
    <button
      class="play-btn w-12 h-12 flex items-center justify-center bg-blue-600 hover:bg-blue-700 text-white rounded-full transition-colors flex-shrink-0"
      aria-label="Play"
    >
      <svg class="play-icon w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
        <path d="M6.3 2.841A1.5 1.5 0 004 4.11v11.78a1.5 1.5 0 002.3 1.269l9.344-5.89a1.5 1.5 0 000-2.538L6.3 2.84z"/>
      </svg>
      <svg class="pause-icon w-5 h-5 hidden" fill="currentColor" viewBox="0 0 20 20">
        <path d="M5.75 3a.75.75 0 00-.75.75v12.5c0 .414.336.75.75.75h1.5a.75.75 0 00.75-.75V3.75A.75.75 0 007.25 3h-1.5zM12.75 3a.75.75 0 00-.75.75v12.5c0 .414.336.75.75.75h1.5a.75.75 0 00.75-.75V3.75a.75.75 0 00-.75-.75h-1.5z"/>
      </svg>
    </button>

    <!-- Progress Section -->
    <div class="flex-1 min-w-0">
      <div class="progress-container h-2 bg-gray-200 rounded-full cursor-pointer relative group">
        <div class="progress-bar h-full bg-blue-600 rounded-full transition-all duration-100" style="width: 0%"></div>
        <div class="progress-handle absolute top-1/2 -translate-y-1/2 w-3 h-3 bg-blue-600 rounded-full opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none" style="left: 0%"></div>
      </div>
      <div class="flex justify-between text-xs text-gray-500 mt-1">
        <span class="current-time">00:00</span>
        <span class="duration">00:00</span>
      </div>
    </div>

    <!-- Volume Control -->
    <div class="hidden sm:flex items-center gap-2">
      <button class="mute-btn text-gray-600 hover:text-gray-800 transition-colors" aria-label="Mute">
        <svg class="volume-icon w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
          <path d="M10 3.75a.75.75 0 00-1.264-.546L4.703 7H3.167a.75.75 0 00-.7.48A6.985 6.985 0 002 10c0 .887.165 1.737.468 2.52.111.29.39.48.7.48h1.535l4.033 3.796A.75.75 0 0010 16.25V3.75zM15.95 5.05a.75.75 0 00-1.06 1.061 5.5 5.5 0 010 7.778.75.75 0 001.06 1.06 7 7 0 000-9.899z"/>
        </svg>
        <svg class="muted-icon w-5 h-5 hidden" fill="currentColor" viewBox="0 0 20 20">
          <path d="M10 3.75a.75.75 0 00-1.264-.546L4.703 7H3.167a.75.75 0 00-.7.48A6.985 6.985 0 002 10c0 .887.165 1.737.468 2.52.111.29.39.48.7.48h1.535l4.033 3.796A.75.75 0 0010 16.25V3.75z"/>
          <path d="M14.5 10a.75.75 0 01-.75.75h-1.5a.75.75 0 010-1.5h1.5a.75.75 0 01.75.75z"/>
        </svg>
      </button>
      <input
        type="range"
        class="volume-slider w-20 h-1 accent-blue-600"
        min="0"
        max="1"
        step="0.1"
        value="1"
        aria-label="Volume"
      >
    </div>
  </div>
</div>
